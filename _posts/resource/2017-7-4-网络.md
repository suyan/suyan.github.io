---
layout: post
title: 计网
category: 面试资料
tags: 计网,resource
keywords: 计网,resource
---

# 网络

## 计算机网络OSI 7层

物理层：基于Bit传输，是属于物理信道，最基本的机械、电子、定时接口通信信道。

数据链路层：基于物理寻址，同时将比特流转变为逻辑传输线路。在这个时候，会将比特流进行封装成帧，但是基本传输元素还是二进制数。

网络层：控制子网的运行，比如逻辑编址，分组传输，路由选择等。

传输层：接收上一层（会话层）的数据，在必要的时候机将数据分割，并将这些数据交给网络层，且保证这些数据段有效到达对段。这个时候就涉及到大家熟知的TCP和UDP传输协议了，也就是说，TCP对应的OSI层为传输层。

会话层：不同机器上的用户之间建立及管理会话。负责组织和协调两个会话进程之间的通信，并对数据交换进行管理。

表示层：信息的语法语义及它们的关联，如加密解密，转换翻译、压缩解压缩等。

应用层：应用层包含了各种应用程序的协议，如HTTP、FTP、SMTP、POP3等。

## TCP&UDP的区别

TCP是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。

UDP是面向非连接的协议，不与对方建立连接，而是直接就把数据包发送过去。UDP适用于一次只传送少量数据，对可靠性要求不高的应用环境。比如Ping命令。

## TCP如何保证可靠性

1.将数据截断为合理的长度

2.超时重发

3.对于受到的请求，给出确认响应（不是立即，可能要做完整校验）

4.如果检验出包有错，丢弃报文段，不给出响应

5.能够丢弃重复数据

6.对收到的数据进行重排序后交给应用层

7.提供流量控制

**【问题1】为什么连接的时候是三次握手，关闭的时候却是四次握手？**
答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，"你发的FIN报文我收到了"。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。